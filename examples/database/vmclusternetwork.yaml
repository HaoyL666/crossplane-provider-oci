apiVersion: database.oci.upbound.io/v1alpha1
kind: VmClusterNetwork
metadata:
  annotations:
    meta.upbound.io/example-id: database/v1alpha1/vmclusternetwork
  labels:
    testing.upbound.io/example-name: test_vm_cluster_network
  name: test-vm-cluster-network
spec:
  forProvider:
    action: ADD_DBSERVER_NETWORK
    compartmentIdSelector:
      matchLabels:
        testing.upbound.io/example-name: example
    displayName: testVmClusterRecommendedNetwork1
    dns:
    - 10.0.10.7
    drScans:
    - hostname: drhostname-izt4c-drscan
      ips:
      - 255.255.248.6
      - 255.255.248.7
      - 255.255.248.8
      scanListenerPortTcp: 1521
    exadataInfrastructureIdSelector:
      matchLabels:
        testing.upbound.io/example-name: test_exadata_infrastructure
    ntp:
    - 10.0.10.8
    scans:
    - hostname: clienthostname-igrik1-scan
      ips:
      - 192.163.10.8
      - 192.163.10.9
      - 192.163.10.10
      port: 1521
      scanListenerPortTcp: 1521
      scanListenerPortTcpSsl: 2484
    validateVmClusterNetwork: true
    vmNetworks:
    - domainName: backupdomainanme.com
      gateway: 192.161.13.1
      netmask: 255.255.248.0
      networkType: BACKUP
      nodes:
      - dbServerId: ${data.oci_database_db_servers.test_db_servers.db_servers.0.id}
        hostname: backuphostname-q3rhi1
        ip: 192.161.13.2
      - dbServerId: ${data.oci_database_db_servers.test_db_servers.db_servers.1.id}
        hostname: backuphostname-q3rhi2
        ip: 192.161.13.3
      vlanId: "232"
    - domainName: oracle.com
      gateway: 192.163.10.3
      netmask: 255.255.224.0
      networkType: CLIENT
      nodes:
      - dbServerId: ${data.oci_database_db_servers.test_db_servers.db_servers.0.id}
        hostname: clienthostname-igrik1
        ip: 192.163.10.4
        vip: 192.163.10.5
        vipHostname: clienthostname-igrik1-vip
      - dbServerId: ${data.oci_database_db_servers.test_db_servers.db_servers.1.id}
        hostname: clienthostname-igrik2
        ip: 192.163.10.6
        vip: 192.163.10.7
        vipHostname: clienthostname-igrik2-vip
      vlanId: "324"
    - domainName: drdomainname.com
      gateway: 255.255.248.1
      netmask: 255.255.248.0
      networkType: DISASTER_RECOVERY
      nodes:
      - dbServerId: ${data.oci_database_db_servers.test_db_servers.db_servers.0.id}
        hostname: drhostname-csuct1
        ip: 255.255.248.2
        vip: 255.255.248.3
        vipHostname: drhostname-csuct1-vip
      - dbServerId: ${data.oci_database_db_servers.test_db_servers.db_servers.1.id}
        hostname: drhostname-csuct2
        ip: 255.255.248.4
        vip: 255.255.248.5
        vipHostname: drhostname-csuct2-vip
      vlanId: "262"

---

apiVersion: database.oci.upbound.io/v1alpha1
kind: ExadataInfrastructure
metadata:
  annotations:
    meta.upbound.io/example-id: database/v1alpha1/vmclusternetwork
  labels:
    testing.upbound.io/example-name: test_exadata_infrastructure
  name: test-exadata-infrastructure
spec:
  forProvider:
    activationFile: activation.zip
    adminNetworkCidr: 192.168.0.0/16
    cloudControlPlaneServer1: 10.32.88.1
    cloudControlPlaneServer2: 10.32.88.3
    compartmentIdSelector:
      matchLabels:
        testing.upbound.io/example-name: example
    computeCount: 2
    contacts:
    - email: testuser2@testdomain.com
      isPrimary: "true"
      name: name
      phoneNumber: "1234567891"
    corporateProxy: http://192.168.19.1:80
    displayName: tstExaInfra
    dnsServer:
    - 10.231.225.65
    gateway: 10.32.88.5
    infiniBandNetworkCidr: 10.31.8.0/21
    isCpsOfflineReportEnabled: false
    isMultiRackDeployment: false
    maintenanceWindow:
    - customActionTimeoutInMins: 30
      daysOfWeek:
      - name: TUESDAY
      hoursOfDay:
      - "4"
      isCustomActionTimeoutEnabled: true
      leadTimeInWeeks: 2
      months:
      - name: JANUARY
      - name: APRIL
      - name: JULY
      - name: OCTOBER
      patchingMode: ROLLING
      preference: CUSTOM_PREFERENCE
      weeksOfMonth:
      - "2"
    netmask: 255.255.255.0
    networkBondingModeDetails:
    - backupNetworkBondingMode: ACTIVE_BACKUP
      clientNetworkBondingMode: ACTIVE_BACKUP
    ntpServer:
    - 10.231.225.76
    shape: ExadataCC.X7
    storageCount: 3
    timeZone: US/Pacific
