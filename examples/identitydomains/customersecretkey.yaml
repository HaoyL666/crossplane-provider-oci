apiVersion: identitydomains.oci.upbound.io/v1alpha1
kind: CustomerSecretKey
metadata:
  annotations:
    meta.upbound.io/example-id: identitydomains/v1alpha1/customersecretkey
  labels:
    testing.upbound.io/example-name: test_customer_secret_key
  name: test-customer-secret-key
spec:
  forProvider:
    attributeSets:
    - all
    attributes: ""
    authorization: ${var.customer_secret_key_authorization}
    description: ${var.customer_secret_key_description}
    displayName: ${var.customer_secret_key_display_name}
    expiresOn: ${var.customer_secret_key_expires_on}
    idcsEndpoint: ${data.oci_identity_domain.test_domain.url}
    schemas:
    - urn:ietf:params:scim:schemas:oracle:idcs:customerSecretKey
    status: ${var.customer_secret_key_status}
    tags:
    - key: ${var.customer_secret_key_tags_key}
      value: ${var.customer_secret_key_tags_value}
    urnietfparamsscimschemasoracleidcsextensionselfChangeUser:
    - allowSelfChange: ${var.customer_secret_key_urnietfparamsscimschemasoracleidcsextensionself_change_user_allow_self_change}
    user:
    - ocidSelector:
        matchLabels:
          testing.upbound.io/example-name: test_user
      valueSelector:
        matchLabels:
          testing.upbound.io/example-name: test_user

---

apiVersion: identitydomains.oci.upbound.io/v1alpha1
kind: User
metadata:
  annotations:
    meta.upbound.io/example-id: identitydomains/v1alpha1/customersecretkey
  labels:
    testing.upbound.io/example-name: test_user
  name: test-user
spec:
  forProvider:
    active: ${var.user_active}
    addresses:
    - country: ${var.user_addresses_country}
      formatted: ${var.user_addresses_formatted}
      locality: ${var.user_addresses_locality}
      postalCode: ${var.user_addresses_postal_code}
      primary: ${var.user_addresses_primary}
      region: ${var.user_addresses_region}
      streetAddress: ${var.user_addresses_street_address}
      type: ${var.user_addresses_type}
    attributeSets:
    - all
    attributes: ""
    authorization: ${var.user_authorization}
    description: ${var.user_description}
    displayName: ${var.user_display_name}
    emails:
    - primary: ${var.user_emails_primary}
      secondary: ${var.user_emails_secondary}
      type: ${var.user_emails_type}
      value: ${var.user_emails_value}
      verified: ${var.user_emails_verified}
    - type: recovery
      value: ${var.user_emails_value}
    entitlements:
    - display: ${var.user_entitlements_display}
      primary: ${var.user_entitlements_primary}
      type: ${var.user_entitlements_type}
      value: ${var.user_entitlements_value}
    externalId: externalId
    forceDelete: true
    idcsEndpoint: ${data.oci_identity_domain.test_domain.url}
    ims:
    - display: ${var.user_ims_display}
      primary: ${var.user_ims_primary}
      type: ${var.user_ims_type}
      value: ${var.user_ims_value}
    locale: ${var.user_locale}
    name:
    - familyName: ${var.user_name_family_name}
      formatted: ${var.user_name_formatted}
      givenName: ${var.user_name_given_name}
      honorificPrefix: ${var.user_name_honorific_prefix}
      honorificSuffix: ${var.user_name_honorific_suffix}
      middleName: ${var.user_name_middle_name}
    nickName: ${var.user_nick_name}
    passwordSecretRef:
      key: example-key
      name: example-secret
      namespace: upbound-system
    phoneNumbers:
    - primary: ${var.user_phone_numbers_primary}
      type: ${var.user_phone_numbers_type}
      value: ${var.user_phone_numbers_value}
    photos:
    - display: ${var.user_photos_display}
      primary: ${var.user_photos_primary}
      type: ${var.user_photos_type}
      value: ${var.user_photos_value}
    preferredLanguage: ${var.user_preferred_language}
    profileUrl: ${var.user_profile_url}
    roles:
    - display: ${var.user_roles_display}
      primary: ${var.user_roles_primary}
      type: ${var.user_roles_type}
      value: ${var.user_roles_value}
    schemas:
    - urn:ietf:params:scim:schemas:core:2.0:User
    tags:
    - key: ${var.user_tags_key}
      value: ${var.user_tags_value}
    timezone: ${var.user_timezone}
    title: ${var.user_title}
    urnietfparamsscimschemasextensionenterprise20user:
    - costCenter: ${var.user_urnietfparamsscimschemasextensionenterprise20user_cost_center}
      department: ${var.user_urnietfparamsscimschemasextensionenterprise20user_department}
      division: ${var.user_urnietfparamsscimschemasextensionenterprise20user_division}
      employeeNumber: ${var.user_urnietfparamsscimschemasextensionenterprise20user_employee_number}
      organization: ${var.user_urnietfparamsscimschemasextensionenterprise20user_organization}
    urnietfparamsscimschemasoracleidcsextensionOciTags:
    - freeformTags:
      - key: ${var.user_urnietfparamsscimschemasoracleidcsextension_oci_tags_freeform_tags_key}
        value: ${var.user_urnietfparamsscimschemasoracleidcsextension_oci_tags_freeform_tags_value}
    urnietfparamsscimschemasoracleidcsextensionadaptiveUser:
    - riskLevel: ${var.user_urnietfparamsscimschemasoracleidcsextensionadaptive_user_risk_level}
    urnietfparamsscimschemasoracleidcsextensioncapabilitiesUser:
    - canUseApiKeys: true
      canUseAuthTokens: true
      canUseConsolePassword: true
      canUseCustomerSecretKeys: true
      canUseDbCredentials: true
      canUseOauth2ClientCredentials: true
      canUseSmtpCredentials: true
    urnietfparamsscimschemasoracleidcsextensiondbCredentialsUser:
    - dbUserName: dbUserName
    urnietfparamsscimschemasoracleidcsextensionpasswordlessUser:
    - factorMethod: ${var.user_urnietfparamsscimschemasoracleidcsextensionpasswordless_user_factor_method}
      factorType: ${var.user_urnietfparamsscimschemasoracleidcsextensionpasswordless_user_factor_type}
    urnietfparamsscimschemasoracleidcsextensionposixUser:
    - gecos: ${var.user_urnietfparamsscimschemasoracleidcsextensionposix_user_gecos}
      homeDirectory: ${var.user_urnietfparamsscimschemasoracleidcsextensionposix_user_home_directory}
      loginShell: ${var.user_urnietfparamsscimschemasoracleidcsextensionposix_user_login_shell}
      uidNumber: ${var.user_urnietfparamsscimschemasoracleidcsextensionposix_user_uid_number}
    urnietfparamsscimschemasoracleidcsextensionselfChangeUser:
    - allowSelfChange: ${var.user_urnietfparamsscimschemasoracleidcsextensionself_change_user_allow_self_change}
    urnietfparamsscimschemasoracleidcsextensionsffUser:
    - sffAuthKeys: ${var.user_urnietfparamsscimschemasoracleidcsextensionsff_user_sff_auth_keys}
    urnietfparamsscimschemasoracleidcsextensionuserStateUser:
    - maxConcurrentSessions: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_state_user_max_concurrent_sessions}
    urnietfparamsscimschemasoracleidcsextensionuserUser:
    - accountRecoveryRequired: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_user_account_recovery_required}
      bypassNotification: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_user_bypass_notification}
      creationMechanism: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_user_creation_mechanism}
      doNotShowGettingStarted: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_user_do_not_show_getting_started}
      isAuthenticationDelegated: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_user_is_authentication_delegated}
      isFederatedUser: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_user_is_federated_user}
      isGroupMembershipNormalized: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_user_is_group_membership_normalized}
      isGroupMembershipSyncedToUsersGroups: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_user_is_group_membership_synced_to_users_groups}
      userFlowControlledByExternalClient: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_user_user_flow_controlled_by_external_client}
      userProvider: ${var.user_urnietfparamsscimschemasoracleidcsextensionuser_user_user_provider}
    userName: userName
    userType: ${var.user_user_type}
