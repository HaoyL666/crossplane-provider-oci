apiVersion: identitydomains.oci.upbound.io/v1alpha1
kind: SelfRegistrationProfile
metadata:
  annotations:
    meta.upbound.io/example-id: identitydomains/v1alpha1/selfregistrationprofile
  labels:
    testing.upbound.io/example-name: test_self_registration_profile
  name: test-self-registration-profile
spec:
  forProvider:
    activationEmailRequired: ${var.self_registration_profile_activation_email_required}
    active: ${var.self_registration_profile_active}
    afterSubmitText:
    - default: ${var.self_registration_profile_after_submit_text_default}
      locale: ${var.self_registration_profile_after_submit_text_locale}
      value: ${var.self_registration_profile_after_submit_text_value}
    allowedEmailDomains: ${var.self_registration_profile_allowed_email_domains}
    attributeSets:
    - all
    attributes: ""
    authorization: ${var.self_registration_profile_authorization}
    consentText:
    - default: ${var.self_registration_profile_consent_text_default}
      locale: ${var.self_registration_profile_consent_text_locale}
      value: ${var.self_registration_profile_consent_text_value}
    consentTextPresent: ${var.self_registration_profile_consent_text_present}
    defaultGroups:
    - valueSelector:
        matchLabels:
          testing.upbound.io/example-name: test_self_registration_profile_group
    disallowedEmailDomains: ${var.self_registration_profile_disallowed_email_domains}
    displayName:
    - default: ${var.self_registration_profile_display_name_default}
      locale: ${var.self_registration_profile_display_name_locale}
      value: ${var.self_registration_profile_display_name_value}
    emailTemplate:
    - value: ${var.self_registration_profile_email_template_value}
    footerLogo: ${var.self_registration_profile_footer_logo}
    footerText:
    - default: ${var.self_registration_profile_footer_text_default}
      locale: ${var.self_registration_profile_footer_text_locale}
      value: ${var.self_registration_profile_footer_text_value}
    headerLogo: ${var.self_registration_profile_header_logo}
    headerText:
    - default: ${var.self_registration_profile_header_text_default}
      locale: ${var.self_registration_profile_header_text_locale}
      value: ${var.self_registration_profile_header_text_value}
    idcsEndpoint: ${data.oci_identity_domain.test_domain.url}
    name: ${var.self_registration_profile_name}
    numberOfDaysRedirectUrlIsValid: ${var.self_registration_profile_number_of_days_redirect_url_is_valid}
    redirectUrl: ${var.self_registration_profile_redirect_url}
    schemas:
    - urn:ietf:params:scim:schemas:oracle:idcs:SelfRegistrationProfile
    showOnLoginPage: ${var.self_registration_profile_show_on_login_page}
    tags:
    - key: ${var.self_registration_profile_tags_key}
      value: ${var.self_registration_profile_tags_value}
    userAttributes:
    - fullyQualifiedAttributeName: ${var.self_registration_profile_user_attributes_fully_qualified_attribute_name}
      seqNumber: ${var.self_registration_profile_user_attributes_seq_number}
      value: ${var.self_registration_profile_user_attributes_value}

---

apiVersion: identitydomains.oci.upbound.io/v1alpha1
kind: Group
metadata:
  annotations:
    meta.upbound.io/example-id: identitydomains/v1alpha1/selfregistrationprofile
  labels:
    testing.upbound.io/example-name: test_self_registration_profile_group
  name: test-self-registration-profile-group
spec:
  forProvider:
    displayName: groupDisplayName
    idcsEndpoint: ${data.oci_identity_domain.test_domain.url}
    schemas:
    - urn:ietf:params:scim:schemas:core:2.0:Group
