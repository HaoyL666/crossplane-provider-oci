apiVersion: generativeai.oci.upbound.io/v1alpha1
kind: AgentTool
metadata:
  annotations:
    meta.upbound.io/example-id: generativeai/v1alpha1/agenttool
  labels:
    testing.upbound.io/example-name: test_tool
  name: test-tool
spec:
  forProvider:
    agentIdSelector:
      matchLabels:
        testing.upbound.io/example-name: test_agent
    compartmentIdSelector:
      matchLabels:
        testing.upbound.io/example-name: example
    definedTags:
      Operations.CostCenter: "42"
    description: ${var.tool_description}
    displayName: ${var.tool_display_name}
    freeformTags:
      Department: Finance
    metadata: ${var.tool_metadata}
    toolConfig:
    - agentEndpointIdSelector:
        matchLabels:
          testing.upbound.io/example-name: test_agent_endpoint
      apiSchema:
      - apiSchemaInputLocationType: ${var.tool_tool_config_api_schema_api_schema_input_location_type}
        bucket: ${var.tool_tool_config_api_schema_bucket}
        content: ${var.tool_tool_config_api_schema_content}
        namespace: ${var.tool_tool_config_api_schema_namespace}
        object: ${var.tool_tool_config_api_schema_object}
      databaseConnection:
      - connectionIdSelector:
          matchLabels:
            testing.upbound.io/example-name: test_connection
        connectionType: ${var.tool_tool_config_database_connection_connection_type}
      databaseSchema:
      - bucket: ${var.tool_tool_config_database_schema_bucket}
        content: ${var.tool_tool_config_database_schema_content}
        inputLocationType: ${var.tool_tool_config_database_schema_input_location_type}
        namespace: ${var.tool_tool_config_database_schema_namespace}
        prefix: ${var.tool_tool_config_database_schema_prefix}
      dialect: ${var.tool_tool_config_dialect}
      function:
      - description: ${var.tool_tool_config_function_description}
        name: ${var.tool_tool_config_function_name}
        parameters: ${var.tool_tool_config_function_parameters}
      generationLlmCustomization:
      - instruction: ${var.tool_tool_config_generation_llm_customization_instruction}
      httpEndpointAuthConfig:
      - httpEndpointAuthSources:
        - httpEndpointAuthScope: ${var.tool_tool_config_http_endpoint_auth_config_http_endpoint_auth_sources_http_endpoint_auth_scope}
          httpEndpointAuthScopeConfig:
          - clientId: ${oci_generative_ai_agent_client.test_client.id}
            httpEndpointAuthScopeConfigType: ${var.tool_tool_config_http_endpoint_auth_config_http_endpoint_auth_sources_http_endpoint_auth_scope_config_http_endpoint_auth_scope_config_type}
            idcsUrl: ${var.tool_tool_config_http_endpoint_auth_config_http_endpoint_auth_sources_http_endpoint_auth_scope_config_idcs_url}
            keyLocation: ${var.tool_tool_config_http_endpoint_auth_config_http_endpoint_auth_sources_http_endpoint_auth_scope_config_key_location}
            keyNameSelector:
              matchLabels:
                testing.upbound.io/example-name: test_key
            scopeUrl: ${var.tool_tool_config_http_endpoint_auth_config_http_endpoint_auth_sources_http_endpoint_auth_scope_config_scope_url}
            vaultSecretIdSelector:
              matchLabels:
                testing.upbound.io/example-name: test_secret
      iclExamples:
      - bucket: ${var.tool_tool_config_icl_examples_bucket}
        content: ${var.tool_tool_config_icl_examples_content}
        inputLocationType: ${var.tool_tool_config_icl_examples_input_location_type}
        namespace: ${var.tool_tool_config_icl_examples_namespace}
        prefix: ${var.tool_tool_config_icl_examples_prefix}
      knowledgeBaseConfigs:
      - knowledgeBaseIdSelector:
          matchLabels:
            testing.upbound.io/example-name: test_knowledge_base
      modelSize: ${var.tool_tool_config_model_size}
      shouldEnableSelfCorrection: ${var.tool_tool_config_should_enable_self_correction}
      shouldEnableSqlExecution: ${var.tool_tool_config_should_enable_sql_execution}
      subnetIdSelector:
        matchLabels:
          testing.upbound.io/example-name: test_subnet
      tableAndColumnDescription:
      - bucket: ${var.tool_tool_config_table_and_column_description_bucket}
        content: ${var.tool_tool_config_table_and_column_description_content}
        inputLocationType: ${var.tool_tool_config_table_and_column_description_input_location_type}
        namespace: ${var.tool_tool_config_table_and_column_description_namespace}
        prefix: ${var.tool_tool_config_table_and_column_description_prefix}
      toolConfigType: ${var.tool_tool_config_tool_config_type}
