apiVersion: jms.oci.upbound.io/v1alpha1
kind: TaskSchedule
metadata:
  annotations:
    meta.upbound.io/example-id: jms/v1alpha1/taskschedule
  labels:
    testing.upbound.io/example-name: test_task_schedule
  name: test-task-schedule
spec:
  forProvider:
    executionRecurrences: DTSTART=20240805T090000Z;RRULE:FREQ=HOURLY;INTERVAL=3;UNTIL=20240805T170000Z
    fleetId: ${var.fleet_ocid}
    taskDetails:
    - addInstallationSiteTaskRequest:
      - installationSites:
        - artifactContentType: JDK
          forceInstall: false
          headlessMode: false
          installationPath: /example/install/path
          managedInstanceId: example-managed-instance-ocid
          releaseVersion: 17.0.0
        postInstallationActions: []
      cryptoTaskRequest:
      - recordingDurationInMinutes: 10
        targets:
        - applicationInstallationKey: example-application-installation-key
          applicationKey: example-application-key
          containerKey: example-container-key
          jreKey: example-jre-key
          managedInstanceId: example-managed-instance-ocid
        waitingPeriodInMinutes: 10
      deployedApplicationMigrationTaskRequest:
      - targets:
        - deployedApplicationInstallationKey: example-application-installation-key
          excludePackagePrefixes: []
          includePackagePrefixes: []
          managedInstanceId: example-managed-instance-ocid
          sourceJdkVersion: "11"
          targetJdkVersion: "21"
      javaMigrationTaskRequest:
      - targets:
        - applicationInstallationKey: example-application-installation-key
          excludePackagePrefixes: []
          includePackagePrefixes: []
          managedInstanceId: example-managed-instance-ocid
          sourceJdkVersion: "11"
          targetJdkVersion: "21"
      jfrTaskRequest:
      - jfcProfileName: jfcV1
        jfcV1: jfcV1
        jfcV2: jfvV2
        recordingDurationInMinutes: 10
        recordingSizeInMb: 10
        targets:
        - applicationInstallationKey: example-application-installation-key
          applicationKey: example-application-key
          containerKey: example-container-key
          jreKey: example-jre-key
          managedInstanceId: example-managed-instance-ocid
        waitingPeriodInMinutes: 10
      performanceTuningTaskRequest:
      - recordingDurationInMinutes: 10
        targets:
        - applicationInstallationKey: example-application-installation-key
          applicationKey: example-application-key
          containerKey: example-container-key
          jreKey: example-jre-key
          managedInstanceId: example-managed-instance-ocid
        waitingPeriodInMinutes: 10
      removeInstallationSiteTaskRequest:
      - installationSites:
        - installationKey: example-jvm-installation-key
          managedInstanceId: example-managed-instance-ocid
      scanJavaServerTaskRequest:
      - managedInstanceIds: []
      scanLibraryTaskRequest:
      - dynamicScanDurationInMinutes: 10
        isDynamicScan: false
        managedInstanceIds: []
      taskType: ADD_INSTALLATION_SITE
